# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 16 –ö–ë —Å—Ç—Ä–∞–Ω–∏—Ü

## ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (Windows)
```cmd
check_16kb.bat
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (Linux/Mac)
```bash
chmod +x check_16kb.sh
./check_16kb.sh
```

### 3. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ AndroidManifest.xml:
```xml
<application
    ...
    android:extractNativeLibs="false"
    ...>
```

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ build.gradle:
```gradle
targetSdk 35
packaging {
    jniLibs {
        useLegacyPackaging = false
    }
}
```

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ APK Analyzer (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–≥–ª–∞—Å–Ω–æ [—Å—Ç–∞—Ç—å–µ –Ω–∞ Habr](https://habr.com/ru/companies/ncloudtech/articles/960520/), —ç—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±:

1. **–°–æ–±–µ—Ä–∏—Ç–µ release APK:**
   ```bash
   gradlew assembleRelease
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ APK Analyzer:**
   - Android Studio ‚Üí Build ‚Üí Analyze APK
   - –í—ã–±–µ—Ä–∏—Ç–µ: `app/build/outputs/apk/release/app-release.apk`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **"lib"** –∏–ª–∏ **"Native libs"**
   - –í —Å—Ç–æ–ª–±—Ü–µ **"Alignment"** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **16384** (16 –ö–ë) –¥–ª—è –≤—Å–µ—Ö `.so` —Ñ–∞–π–ª–æ–≤
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ **4096** (4 –ö–ë) ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –≤—ã—Ä–æ–≤–Ω–µ–Ω–∞

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Android Studio 2025.1.3 –∏–ª–∏ –Ω–æ–≤–µ–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.

### 2. –°–æ–±–µ—Ä–∏—Ç–µ release AAB:
```bash
# Windows
gradlew bundleRelease

# Linux/Mac
./gradlew bundleRelease
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ Google Play Console:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ AAB –≤ **Internal Testing**
2. –û—Ç–∫—Ä–æ–π—Ç–µ **App Bundle Explorer**
3. Google Play –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É 16 –ö–ë —Å—Ç—Ä–∞–Ω–∏—Ü
4. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ bundletool:
```bash
java -jar bundletool.jar validate --bundle=app/build/outputs/bundle/release/app-release.aab
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- Google Play Console **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ AAB
- –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 16 –ö–ë —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–Ω–æ –±—É–¥–µ—Ç **–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**, –≤ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

- [ ] `extractNativeLibs="false"` –≤ AndroidManifest.xml
- [ ] `targetSdk 35` –≤ build.gradle
- [ ] `useLegacyPackaging = false` –≤ build.gradle
- [ ] Android Gradle Plugin 8.5.1+ (—É –≤–∞—Å 8.13.0 ‚úÖ)
- [ ] Release APK —Å–æ–±—Ä–∞–Ω: `gradlew assembleRelease`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ APK Analyzer ‚Äî –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ 16384 –¥–ª—è –≤—Å–µ—Ö `.so` —Ñ–∞–π–ª–æ–≤
- [ ] Release AAB —Å–æ–±—Ä–∞–Ω: `gradlew bundleRelease`
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω –≤ Google Play Console (Internal Testing)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω App Bundle Explorer ‚Äî –Ω–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ 16 –ö–ë —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `./gradlew clean build`
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ AAB
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Google Play Console

